<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>EL PAÍS: El periódico global</title>
    
    <!-- DNS Prefetch para recursos externos -->
    <link rel="dns-prefetch" href="https://fonts.googleapis.com">
    <link rel="dns-prefetch" href="https://fonts.gstatic.com">
    <link rel="dns-prefetch" href="https://scripts.converteai.net">
    <link rel="dns-prefetch" href="https://escala.purelifenews.com">
    
    <!-- Preconnect para fontes (carregamento mais rápido) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    <!-- Fontes otimizadas com display=swap para evitar FOIT -->
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&family=Merriweather:wght@400;700&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&family=Merriweather:wght@400;700&display=swap" rel="stylesheet"></noscript>
    
    <!-- Google Tag Manager (async para não bloquear) -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s);j.async=true;j.src="https://escala.purelifenews.com/cechksinwxgg.js?"+i;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','6sinyrou=DgNFMDokXj8hKTpDLVAnTRFaSllfTxcFWhcNBQsFGg0CCR0AHUcQBAo%3D');</script>
    <!-- End Google Tag Manager -->
    
    <!-- Vturb CTA Tracking - Captura cliques no botão do player (VTurb v4.5.0+) -->
    <script>
      console.log('[VTurb Tracking] Script initialized - v2.0 for VTurb 4.5.0+');
      window.dataLayer = window.dataLayer || [];
      
      (function() {
        var ctaTracked = false;
        var listenerAttached = false;
        
        function pushInitiateCheckout(source) {
          if (ctaTracked) return;
          ctaTracked = true;
          
          window.dataLayer.push({
            'event': 'initiate_checkout',
            'event_category': 'ecommerce',
            'event_label': 'vturb_cta_click',
            'cta_source': source || 'vturb_smartplayer'
          });
          console.log('[VTurb Tracking] InitiateCheckout pushed to dataLayer from:', source);
        }
        
        function attachVTurbListeners(player) {
          if (listenerAttached) return;
          listenerAttached = true;
          
          console.log('[VTurb Tracking] Attaching event listeners to vturb-smartplayer element...');
          
          var playerEvents = [
            'player:cta-click',
            'player:cta_click', 
            'cta:click',
            'cta-click',
            'cta_click',
            'ctaclick',
            'button:click',
            'smartplayer:cta'
          ];
          
          playerEvents.forEach(function(eventName) {
            player.addEventListener(eventName, function(e) {
              console.log('[VTurb Tracking] Event "' + eventName + '" detected:', e);
              pushInitiateCheckout('vturb_' + eventName);
            });
          });
          
          console.log('[VTurb Tracking] Event listeners attached successfully');
        }
        
        function findAndAttachToPlayer() {
          var player = document.querySelector('vturb-smartplayer');
          if (player) {
            console.log('[VTurb Tracking] Found vturb-smartplayer element');
            attachVTurbListeners(player);
            
            player.addEventListener('player:ready', function() {
              console.log('[VTurb Tracking] Player ready event received');
            });
            
            return true;
          }
          return false;
        }
        
        function pollForPlayer() {
          var attempts = 0;
          var maxAttempts = 120;
          
          var poll = function() {
            if (findAndAttachToPlayer()) {
              return;
            }
            attempts++;
            if (attempts < maxAttempts) {
              setTimeout(poll, 500);
            } else {
              console.log('[VTurb Tracking] Max attempts reached, player not found');
            }
          };
          
          poll();
        }
        
        function startTracking() {
          console.log('[VTurb Tracking] VTurb element detected, starting player polling...');
          pollForPlayer();
        }
        
        var observer = new MutationObserver(function(mutations) {
          mutations.forEach(function(mutation) {
            mutation.addedNodes.forEach(function(node) {
              if (node.nodeType === 1) {
                if (node.tagName && node.tagName.toLowerCase() === 'vturb-smartplayer') {
                  startTracking();
                }
                if (node.tagName === 'IFRAME' && node.src && node.src.includes('converteai.net')) {
                  startTracking();
                }
                if (node.querySelectorAll) {
                  var vturbElements = node.querySelectorAll('vturb-smartplayer');
                  if (vturbElements.length > 0) {
                    startTracking();
                  }
                  var iframes = node.querySelectorAll('iframe[src*="converteai.net"]');
                  if (iframes.length > 0) {
                    startTracking();
                  }
                }
              }
            });
          });
        });
        
        observer.observe(document.documentElement, { childList: true, subtree: true });
        
        if (document.querySelector('vturb-smartplayer') || document.querySelector('iframe[src*="converteai.net"]')) {
          startTracking();
        }
        
        document.addEventListener('click', function(e) {
          var target = e.target;
          while (target && target !== document.body) {
            if (target.classList && (
              target.classList.contains('smartplayer-click-event') ||
              target.classList.contains('vturb-cta') ||
              target.classList.contains('smartplayer-cta') ||
              (target.id && target.id.includes('smartplayer-click-event'))
            )) {
              console.log('[VTurb Tracking] CTA click detected via class/ID:', target);
              pushInitiateCheckout('dom_click_class');
              return;
            }
            target = target.parentElement;
          }
        }, true);
        
        window.addEventListener('message', function(event) {
          try {
            var data = event.data;
            
            if (typeof data === 'string') {
              try {
                data = JSON.parse(data);
              } catch (e) {
                if (data.toLowerCase().includes('cta') || data.toLowerCase().includes('button')) {
                  console.log('[VTurb Tracking] CTA string message detected:', data);
                  pushInitiateCheckout('postmessage_string');
                }
                return;
              }
            }
            
            if (!data || typeof data !== 'object') return;
            
            var dataStr = JSON.stringify(data).toLowerCase();
            var isCTAEvent = 
              dataStr.includes('cta') ||
              dataStr.includes('button_click') ||
              dataStr.includes('checkout') ||
              data.event === 'player:cta-click' ||
              data.type === 'cta';
            
            if (isCTAEvent) {
              console.log('[VTurb Tracking] CTA event detected via postMessage:', data);
              pushInitiateCheckout('postmessage');
            }
          } catch (e) {}
        });
        
        console.log('[VTurb Tracking] Setup complete - watching for VTurb elements');
      })();
    </script>
    <!-- End Vturb CTA Tracking -->
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: {
              serif: ['Merriweather', 'serif'],
              sans: ['Inter', 'sans-serif'],
            },
            colors: {
              news: {
                black: '#121212',
                yellow: '#F7D844',
                blue: '#005596',
                gray: '#4a4a4a',
                lightgray: '#f5f5f5'
              }
            }
          }
        }
      }
    </script>
    <style>
      /* Hide scrollbar for clean horizontal scrolling if needed */
      .no-scrollbar::-webkit-scrollbar {
        display: none;
      }
      .no-scrollbar {
        -ms-overflow-style: none;
        scrollbar-width: none;
      }
      
      /* Pulsing animation for CTA buttons */
      @keyframes pulse-glow {
        0%, 100% {
          transform: scale(1);
          box-shadow: 0 0 0 0 rgba(247, 216, 68, 0.7);
        }
        50% {
          transform: scale(1.02);
          box-shadow: 0 0 20px 5px rgba(247, 216, 68, 0.4);
        }
      }
      .animate-pulse-cta {
        animation: pulse-glow 2s ease-in-out infinite;
      }
    </style>
  </head>
  <body class="bg-white text-news-black font-sans antialiased">
    <div id="root"></div>
    <script type="module" src="/index.tsx"></script>
  </body>
</html>